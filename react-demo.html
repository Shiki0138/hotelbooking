<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êñ∞Ê©üËÉΩ„Éá„É¢ - LastMinuteStay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple Watchlist Modal Component
        const WatchlistModal = ({ isOpen, onClose, hotel, onSave }) => {
            const [priceThreshold, setPriceThreshold] = useState('');
            const [selectedDays, setSelectedDays] = useState([]);
            const [notificationChannel, setNotificationChannel] = useState('email');
            const [roomThreshold, setRoomThreshold] = useState(5);

            if (!isOpen) return null;

            const days = [
                { key: 0, label: 'Êó•ÊõúÊó•' },
                { key: 1, label: 'ÊúàÊõúÊó•' },
                { key: 2, label: 'ÁÅ´ÊõúÊó•' },
                { key: 3, label: 'Ê∞¥ÊõúÊó•' },
                { key: 4, label: 'Êú®ÊõúÊó•' },
                { key: 5, label: 'ÈáëÊõúÊó•' },
                { key: 6, label: 'ÂúüÊõúÊó•' }
            ];

            const handleDayToggle = (dayKey) => {
                setSelectedDays(prev => 
                    prev.includes(dayKey) 
                        ? prev.filter(d => d !== dayKey)
                        : [...prev, dayKey]
                );
            };

            const handleSave = () => {
                const watchlistItem = {
                    hotelId: hotel.id,
                    priceThreshold: parseFloat(priceThreshold),
                    allowedDays: selectedDays,
                    notificationChannel,
                    roomThreshold,
                    createdAt: new Date().toISOString()
                };
                onSave(watchlistItem);
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto">
                        <div className="p-6">
                            <div className="flex justify-between items-center mb-4">
                                <h3 className="text-lg font-semibold">„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„ÉàË®≠ÂÆö</h3>
                                <button onClick={onClose} className="text-gray-400 hover:text-gray-600">
                                    ‚úï
                                </button>
                            </div>

                            <div className="mb-4">
                                <h4 className="font-medium mb-2">{hotel.name}</h4>
                                <p className="text-sm text-gray-600">ÁèæÂú®‰æ°Ê†º: ¬•{hotel.price?.toLocaleString()}</p>
                            </div>

                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium mb-1">
                                        ÁõÆÊ®ô‰æ°Ê†º (ÂÜÜ)
                                    </label>
                                    <input
                                        type="number"
                                        value={priceThreshold}
                                        onChange={(e) => setPriceThreshold(e.target.value)}
                                        placeholder="‰æã: 35000"
                                        className="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        Áõ£Ë¶ñ„Åô„ÇãÊõúÊó•
                                    </label>
                                    <div className="grid grid-cols-2 gap-2">
                                        {days.map(day => (
                                            <label key={day.key} className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={selectedDays.includes(day.key)}
                                                    onChange={() => handleDayToggle(day.key)}
                                                    className="mr-2"
                                                />
                                                <span className="text-sm">{day.label}</span>
                                            </label>
                                        ))}
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-1">
                                        ÊÆãÂÆ§Êï∞„Ç¢„É©„Éº„Éà
                                    </label>
                                    <input
                                        type="number"
                                        value={roomThreshold}
                                        onChange={(e) => setRoomThreshold(parseInt(e.target.value))}
                                        min="1"
                                        max="10"
                                        className="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">ÊÆãÂÆ§Êï∞„Åå„Åì„ÅÆÊï∞‰ª•‰∏ã„Å´„Å™„Å£„Åü„ÇâÈÄöÁü•</p>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-1">
                                        ÈÄöÁü•ÊñπÊ≥ï
                                    </label>
                                    <select
                                        value={notificationChannel}
                                        onChange={(e) => setNotificationChannel(e.target.value)}
                                        className="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="email">„É°„Éº„É´</option>
                                        <option value="push">„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•</option>
                                        <option value="line">LINE</option>
                                        <option value="sms">SMS</option>
                                    </select>
                                </div>
                            </div>

                            <div className="mt-6 flex gap-3">
                                <button
                                    onClick={handleSave}
                                    disabled={!priceThreshold}
                                    className="flex-1 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    „Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Å´ËøΩÂä†
                                </button>
                                <button
                                    onClick={onClose}
                                    className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400"
                                >
                                    „Ç≠„É£„É≥„Çª„É´
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Price Prediction Component
        const PricePrediction = ({ currentPrice, predictions }) => {
            const lowestPrice = Math.min(...predictions.map(p => p.price));
            const shouldBuyNow = currentPrice <= lowestPrice * 1.05;

            return (
                <div className="bg-white rounded-lg shadow-lg p-6">
                    <h3 className="text-xl font-bold mb-4">‰æ°Ê†º‰∫àÊ∏¨„ÉªË≥ºË≤∑„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº</h3>
                    
                    <div className="mb-4">
                        <div className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${
                            shouldBuyNow ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                        }`}>
                            {shouldBuyNow ? 'üéØ ‰ªä„ÅåË≤∑„ÅÑÊôÇÔºÅ' : '‚è≥ „ÇÇ„ÅÜÂ∞ë„ÅóÂæÖ„Å§„ÅÆ„ÇÇËâØ„ÅÑ„Åã„ÇÇ'}
                        </div>
                    </div>

                    <div className="space-y-2 mb-4">
                        <div className="flex justify-between">
                            <span>ÁèæÂú®‰æ°Ê†º:</span>
                            <span className="font-semibold">¬•{currentPrice.toLocaleString()}</span>
                        </div>
                        <div className="flex justify-between">
                            <span>‰∫àÊ∏¨ÊúÄÂÆâÂÄ§:</span>
                            <span className="font-semibold text-green-600">¬•{lowestPrice.toLocaleString()}</span>
                        </div>
                    </div>

                    <div className="border-t pt-4">
                        <h4 className="font-medium mb-2">7Êó•Èñì‰æ°Ê†º‰∫àÊ∏¨</h4>
                        <div className="space-y-1">
                            {predictions.map((pred, index) => (
                                <div key={index} className="flex justify-between items-center text-sm">
                                    <span>{pred.date}</span>
                                    <div className="flex items-center gap-2">
                                        <span>¬•{pred.price.toLocaleString()}</span>
                                        <span className="text-xs text-gray-500">({pred.confidence}%)</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Personalized Section Component
        const PersonalizedSection = ({ hotels, userSegment }) => {
            const segmentLabels = {
                couple: '„Ç´„ÉÉ„Éó„É´Âêë„Åë',
                family: '„Éï„Ç°„Éü„É™„ÉºÂêë„Åë',
                business: '„Éì„Ç∏„Éç„ÇπÂêë„Åë',
                luxury: 'È´òÁ¥öÂøóÂêë',
                budget: 'ÁØÄÁ¥ÑÈáçË¶ñ',
                solo: '‰∏Ä‰∫∫ÊóÖ',
                group: '„Ç∞„É´„Éº„Éó'
            };

            const reasonTagLabels = {
                room_capacity_match: 'ÈÉ®Â±ã„Çø„Ç§„Éó„ÅåÊúÄÈÅ©',
                price_range_match: '‰∫àÁÆó„Å´„Éî„ÉÉ„Çø„É™',
                spa: '„Çπ„Éë„ÉªÊ∏©Ê≥â„ÅÇ„Çä',
                business_center: '„Éì„Ç∏„Éç„ÇπË®≠ÂÇôÂÖÖÂÆü',
                family_rooms: '„Éï„Ç°„Éü„É™„Éº„É´„Éº„É†',
                location_preference: 'Á´ãÂú∞„ÅåËâØ„ÅÑ',
                amenities_match: 'Ë®≠ÂÇô„ÅåÂÖÖÂÆü'
            };

            return (
                <div className="bg-white rounded-lg shadow-lg p-6">
                    <div className="flex items-center gap-2 mb-4">
                        <h3 className="text-xl font-bold">„ÅÇ„Å™„ÅüÂêë„Åë„ÅÆ„Åä„Åô„Åô„ÇÅ</h3>
                        <span className="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">
                            {segmentLabels[userSegment]}
                        </span>
                    </div>

                    <div className="space-y-4">
                        {hotels.map((hotel, index) => (
                            <div key={index} className="border border-gray-200 rounded-lg p-4">
                                <div className="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 className="font-semibold">{hotel.name}</h4>
                                        <p className="text-sm text-gray-600">{hotel.location}</p>
                                    </div>
                                    <div className="text-right">
                                        <div className="font-bold text-lg">¬•{hotel.price.toLocaleString()}</div>
                                        <div className="text-xs text-purple-600">
                                            „Éû„ÉÉ„ÉÅÂ∫¶: {hotel.personalization_score}%
                                        </div>
                                    </div>
                                </div>

                                <div className="flex flex-wrap gap-1 mt-2">
                                    <span className="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">
                                        „ÅÇ„Å™„ÅüÂêë„Åë
                                    </span>
                                    {hotel.reason_tags?.map((tag, tagIndex) => (
                                        <span key={tagIndex} className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">
                                            {reasonTagLabels[tag] || tag}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [showWatchlist, setShowWatchlist] = useState(false);

            const mockHotel = {
                id: '1',
                name: '„Ç∂„Éª„É™„ÉÉ„ÉÑ„Éª„Ç´„Éº„É´„Éà„É≥Êù±‰∫¨',
                price: 42000,
                location: 'Êù±‰∫¨ÈÉΩÊ∏ØÂå∫'
            };

            const mockPersonalizedHotels = [
                {
                    ...mockHotel,
                    reason_tags: ['room_capacity_match', 'price_range_match', 'spa'],
                    personalization_score: 85,
                    is_personalized: true
                },
                {
                    id: '2',
                    name: '„Éë„Éº„ÇØ „Éè„Ç§„Ç¢„ÉÉ„Éà Êù±‰∫¨',
                    price: 29750,
                    location: 'Êù±‰∫¨ÈÉΩÊñ∞ÂÆøÂå∫',
                    reason_tags: ['business_center', 'family_rooms'],
                    personalization_score: 78,
                    is_personalized: true
                }
            ];

            const mockPredictions = [
                { date: '2025-07-05', price: 42000, confidence: 85 },
                { date: '2025-07-06', price: 45000, confidence: 78 },
                { date: '2025-07-07', price: 48000, confidence: 72 },
                { date: '2025-07-08', price: 44000, confidence: 80 },
                { date: '2025-07-09', price: 41000, confidence: 88 },
                { date: '2025-07-10', price: 39000, confidence: 92 },
                { date: '2025-07-11', price: 43000, confidence: 75 }
            ];

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow-sm border-b">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center py-4">
                                <div className="flex items-center">
                                    <h1 className="text-2xl font-bold text-gray-900">üè® LastMinuteStay</h1>
                                    <span className="ml-4 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
                                        Êñ∞Ê©üËÉΩÂÆüË£ÖÂÆå‰∫Ü
                                    </span>
                                </div>
                                <nav className="flex space-x-6">
                                    <a href="/" className="text-gray-700 hover:text-gray-900">„Éõ„Éº„É†</a>
                                    <a href="/features" className="text-gray-700 hover:text-gray-900">Êñ∞Ê©üËÉΩ„Éá„É¢</a>
                                </nav>
                            </div>
                        </div>
                    </header>

                    {/* Hero Section */}
                    <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <h2 className="text-4xl font-bold mb-4">
                                Êñ∞Ê©üËÉΩ„Éá„É¢„Éö„Éº„Ç∏
                            </h2>
                            <p className="text-xl mb-8">
                                ‚úÖ „Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Éª„Éë„Éº„ÇΩ„Éä„É©„Ç§„Çº„Éº„Ç∑„Éß„É≥„Éª‰æ°Ê†º‰∫àÊ∏¨AIÂÆüË£ÖÂÆå‰∫Ü
                            </p>
                            <button
                                onClick={() => setShowWatchlist(true)}
                                className="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                            >
                                „Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„ÉàÊ©üËÉΩ„Çí„ÉÜ„Çπ„Éà
                            </button>
                        </div>
                    </div>

                    {/* Content */}
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-12">
                        {/* Personalized Recommendations */}
                        <div>
                            <h2 className="text-2xl font-bold mb-6">1. „Éë„Éº„ÇΩ„Éä„É©„Ç§„Ç∫„Éâ„É¨„Ç≥„É°„É≥„Éá„Éº„Ç∑„Éß„É≥</h2>
                            <PersonalizedSection
                                hotels={mockPersonalizedHotels}
                                userSegment="couple"
                            />
                        </div>

                        {/* Price Prediction */}
                        <div>
                            <h2 className="text-2xl font-bold mb-6">2. ‰æ°Ê†º‰∫àÊ∏¨„ÉªË≥ºË≤∑„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº</h2>
                            <PricePrediction
                                currentPrice={42000}
                                predictions={mockPredictions}
                            />
                        </div>

                        {/* Implementation Status */}
                        <div className="bg-white rounded-lg shadow-lg p-8">
                            <h3 className="text-2xl font-bold text-gray-900 mb-6">üéØ ÂÆüË£ÖÂÆå‰∫ÜÊ©üËÉΩ</h3>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div className="border-l-4 border-blue-500 pl-4">
                                    <h4 className="font-semibold text-gray-900">„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„ÉàÊ©üËÉΩ</h4>
                                    <ul className="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ ‰æ°Ê†ºÈñæÂÄ§„ÉªÊõúÊó•ÊåáÂÆöÈÄöÁü•</li>
                                        <li>‚úÖ ÊÆãÂÆ§Êï∞„Ç¢„É©„Éº„Éà</li>
                                        <li>‚úÖ iCal„Ç´„É¨„É≥„ÉÄ„ÉºÈÄ£Êê∫</li>
                                        <li>‚úÖ 15ÂàÜÈñìÈöîÁõ£Ë¶ñCron</li>
                                    </ul>
                                </div>
                                <div className="border-l-4 border-green-500 pl-4">
                                    <h4 className="font-semibold text-gray-900">„Éë„Éº„ÇΩ„Éä„É©„Ç§„Çº„Éº„Ç∑„Éß„É≥</h4>
                                    <ul className="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ 7„Çª„Ç∞„É°„É≥„ÉàËá™ÂãïÂà§ÂÆö</li>
                                        <li>‚úÖ „Äå„ÅÇ„Å™„ÅüÂêë„Åë„Äç„Éê„ÉÉ„Ç∏</li>
                                        <li>‚úÖ „É¨„Ç≥„É°„É≥„Éâ„Çπ„Ç≥„Ç¢Ë®àÁÆó</li>
                                        <li>‚úÖ ÁêÜÁî±„Çø„Ç∞ÁîüÊàê</li>
                                    </ul>
                                </div>
                                <div className="border-l-4 border-purple-500 pl-4">
                                    <h4 className="font-semibold text-gray-900">‰æ°Ê†º‰∫àÊ∏¨AI</h4>
                                    <ul className="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Áµ±Ë®àÁöÑ‰æ°Ê†º‰∫àÊ∏¨</li>
                                        <li>‚úÖ 7Êó•ÈñìÊé®Áßª‰∫àÊ∏¨</li>
                                        <li>‚úÖ „Äå‰ªäË≤∑„ÅÜ„Åπ„Åç„Äç„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº</li>
                                        <li>‚úÖ MLÁî®„Éá„Éº„ÇøÂèéÈõÜ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Watchlist Modal */}
                    {showWatchlist && (
                        <WatchlistModal
                            isOpen={showWatchlist}
                            onClose={() => setShowWatchlist(false)}
                            hotel={mockHotel}
                            onSave={(item) => {
                                console.log('Watchlist item saved:', item);
                                alert('„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„ÅüÔºÅ\\nÔºà„Éá„É¢„É¢„Éº„Éâ„ÅÆ„Åü„ÇÅÂÆüÈöõ„ÅÆÈÄöÁü•„ÅØÈÄÅ‰ø°„Åï„Çå„Åæ„Åõ„ÇìÔºâ');
                                setShowWatchlist(false);
                            }}
                        />
                    )}
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>