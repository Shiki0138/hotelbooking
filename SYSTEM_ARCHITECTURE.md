# ホテル予約通知システム アーキテクチャ

## システム概要
人気ホテルの空室通知と割引情報をリアルタイムで配信するシステム

## 主要機能

### 1. 空室・割引通知システム
- **人気ホテルの空室監視**: 満室ホテルに空きが出たら即座に通知
- **割引情報の検知**: 直近の予約で割引が発生したら通知
- **優先度付き通知**: ユーザーの関心度に応じた通知

### 2. メール配信機能
- **即時配信**: 空室・割引検知から5分以内にメール送信
- **予約リンク付きメール**: ワンクリックで予約画面へ
- **カスタマイズ可能**: 通知頻度・条件を個別設定

### 3. 高度な検索機能
- **地図検索**: Google Maps連携で地域から選択
- **都道府県検索**: エリア別の絞り込み
- **日付検索**: カレンダーUIで期間指定
- **複合検索**: 複数条件の組み合わせ

### 4. モニタリングシステム
- **定期監視**: 5分間隔でホテル情報をチェック
- **差分検知**: 価格・空室状況の変化を検出
- **スマート通知**: 重複通知を防ぐロジック

## 技術スタック
- **フロントエンド**: React + TypeScript
- **バックエンド**: Node.js + Express
- **データベース**: PostgreSQL (Supabase)
- **メール配信**: SendGrid/Amazon SES
- **地図**: Google Maps API
- **モニタリング**: Node-cron
- **ホテルデータ**: 楽天トラベルAPI

## システムフロー
1. ユーザーがホテルをウォッチリストに登録
2. cronジョブが定期的にホテル情報を監視
3. 空室・割引を検知したらメール配信
4. メール内のリンクから予約画面へ遷移

## セキュリティ考慮事項
- APIキーの環境変数管理
- レート制限の実装
- ユーザー認証の強化
- メール配信の検証