# 🎯 LastMinuteStay デモモード仕様書

## 📋 デモモード概要
本番環境の1つ手前のデモ版として、実際のホテルデータを使用した検索・表示機能を提供

## 🎯 必須機能仕様

### 1. ホテル検索システム
#### 基本検索機能
- **エリア指定検索**
  - 都道府県選択（プルダウン）
  - 市区町村選択（自動補完）
  - 人気エリア（東京、大阪、京都、沖縄等）クイック選択

#### 検索結果表示
- **ホテル一覧表示**
  - ホテル名・住所
  - 最安値価格表示
  - ホテル画像（楽天API）
  - 評価・レビュー数
  - 空室状況ステータス

#### フィルタリング機能
- **価格帯フィルタ**（5,000円未満、5,000-10,000円、10,000-20,000円、20,000円以上）
- **ホテルタイプ**（ビジネス、リゾート、シティ、高級）
- **評価**（4.0以上、3.5以上等）

### 2. ホテル詳細情報
#### 詳細ページ機能
- **基本情報**
  - ホテル名・住所・電話番号
  - アクセス情報
  - チェックイン/アウト時間

#### 料金・空室情報
- **日別料金表示**（カレンダー形式）
- **空室状況**（◯=空室あり、△=残り僅か、×=満室）
- **最安値ハイライト**
- **直前割引表示**

#### 画像・設備情報
- **ホテル画像ギャラリー**
- **客室タイプ一覧**
- **設備・サービス一覧**
- **周辺情報・アクセス**

### 3. メールアラート機能
#### ユーザー登録
- **簡易登録フォーム**
  - メールアドレス
  - 名前（ニックネーム可）
  - 希望エリア（複数選択可）

#### ホテルウォッチリスト
- **お気に入りホテル登録**
  - ホテル詳細ページから「アラート登録」
  - 希望価格帯設定
  - 希望宿泊日設定（範囲指定可）

#### 自動通知システム
- **空室・価格変動アラート**
  - 1日1回の自動チェック
  - 条件マッチ時の即時メール送信
  - 美しいHTMLメールテンプレート

## 🛠️ 技術仕様

### フロントエンド
- **既存のindex.html**を拡張
- **バニラJavaScript**（React不使用）
- **レスポンシブデザイン**
- **検索フォーム・結果表示・詳細モーダル**

### バックエンド API
- **楽天トラベルAPI**統合（既存）
- **Supabase**ユーザー・ウォッチリスト管理
- **Resend**メール配信（既存Worker3成果物活用）

### データベーススキーマ
```sql
-- ユーザーテーブル
users (
  id UUID PRIMARY KEY,
  email VARCHAR UNIQUE,
  name VARCHAR,
  created_at TIMESTAMP
);

-- ウォッチリストテーブル
watchlist (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  hotel_id VARCHAR, -- 楽天ホテルID
  hotel_name VARCHAR,
  area VARCHAR,
  max_price INTEGER,
  check_in_date DATE,
  check_out_date DATE,
  created_at TIMESTAMP
);

-- 通知履歴テーブル
notifications (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  watchlist_id UUID REFERENCES watchlist(id),
  notification_type VARCHAR, -- 'availability', 'price_drop'
  hotel_data JSONB,
  sent_at TIMESTAMP
);
```

## 📦 デモモード実装計画

### Phase 1: ホテル検索システム（Worker1担当）
- 楽天API統合強化
- 検索フォーム実装
- 結果表示・詳細モーダル
- 価格・空室チェック機能

### Phase 2: ユーザー管理・ウォッチリスト（Worker2担当）
- ユーザー登録フォーム
- ウォッチリスト管理UI
- お気に入りホテル登録機能
- マイページ実装

### Phase 3: メール配信システム（Worker3担当）
- データベーススキーマ作成
- 自動チェックバッチ処理
- メール配信システム
- 通知履歴管理

## 🎯 デモモード成功基準

### 必須達成項目
- [ ] エリア指定でホテル検索可能
- [ ] ホテル詳細情報・料金表示
- [ ] 空室状況確認機能
- [ ] ユーザー登録・ログイン
- [ ] ウォッチリスト登録
- [ ] メールアラート配信

### 品質基準
- 検索レスポンス < 3秒
- UI/UX直感的操作
- モバイル対応
- エラーハンドリング完備

## 🚀 リリース予定
- **開発期間**: 16時間
- **デモ環境**: Vercel
- **データベース**: Supabase
- **ドメイン**: lastminutestay-demo.vercel.app

---
**目標**: 実用的なホテル検索・アラートシステムのデモ版構築